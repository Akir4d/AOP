"use strict";(self.webpackChunkemergency=self.webpackChunkemergency||[]).push([[876],{1876:(Y,p,i)=>{i.r(p),i.d(p,{UsersModule:()=>u});var n=i(433),c=i(6895),a=i(1002),x=i(590),t=i(8256),g=i(6191),h=i(1740),v=i(4247),Z=i(7280);function A(s,r){1&s&&(t.TgZ(0,"small",21),t._uU(1,"First Name is required"),t.qZA())}function T(s,r){1&s&&(t.TgZ(0,"small"),t._uU(1,"Username is required"),t.qZA())}function b(s,r){1&s&&(t.TgZ(0,"small"),t._uU(1,"Last Name is required"),t.qZA())}function C(s,r){1&s&&(t.TgZ(0,"small"),t._uU(1,"Password is required"),t.qZA())}function N(s,r){1&s&&(t.TgZ(0,"small"),t._uU(1,"Password must be at least 6 characters"),t.qZA())}function U(s,r){1&s&&t._UZ(0,"i",22)}const l=function(s){return{"is-invalid":s}};function q(s,r){if(1&s){const e=t.EpF();t.TgZ(0,"form",3),t.NdJ("ngSubmit",function(){t.CHM(e);const f=t.oxw();return t.KtG(f.onSubmit())}),t.TgZ(1,"div",4)(2,"div",5)(3,"div",6)(4,"span",7),t._UZ(5,"input",8),t.TgZ(6,"label",9),t._uU(7,"First Name"),t.qZA(),t.YNc(8,A,2,0,"small",10),t.qZA()(),t.TgZ(9,"div",6)(10,"span",7),t._UZ(11,"input",11),t.TgZ(12,"label",12),t._uU(13,"Username"),t.qZA(),t.YNc(14,T,2,0,"small",13),t.qZA()()(),t.TgZ(15,"div",5)(16,"div",6)(17,"span",7),t._UZ(18,"input",14),t.TgZ(19,"label",12),t._uU(20,"Last Name"),t.qZA(),t.YNc(21,b,2,0,"small",13),t.qZA()(),t.TgZ(22,"div",6)(23,"span",7),t._UZ(24,"input",15),t.TgZ(25,"label",16),t._uU(26,"Password"),t.qZA(),t.YNc(27,C,2,0,"small",13),t.YNc(28,N,2,0,"small",13),t.qZA()()()(),t.TgZ(29,"div",17)(30,"button",18),t.YNc(31,U,1,0,"i",19),t._uU(32," Save "),t.qZA(),t.TgZ(33,"button",20),t._uU(34,"Cancel"),t.qZA()()()}if(2&s){const e=t.oxw();t.Q6J("formGroup",e.form),t.xp6(5),t.Q6J("ngClass",t.VKq(11,l,e.submitted&&e.f.firstName.errors)),t.xp6(3),t.Q6J("ngIf",e.submitted&&e.f.username.errors),t.xp6(3),t.Q6J("ngClass",t.VKq(13,l,e.submitted&&e.f.username.errors)),t.xp6(3),t.Q6J("ngIf",e.submitted&&(null==e.f.username.errors?null:e.f.username.errors.required)),t.xp6(4),t.Q6J("ngClass",t.VKq(15,l,e.submitted&&e.f.lastName.errors)),t.xp6(3),t.Q6J("ngIf",e.submitted&&(null==e.f.lastName.errors?null:e.f.lastName.errors.required)),t.xp6(3),t.Q6J("ngClass",t.VKq(17,l,e.submitted&&e.f.password.errors)),t.xp6(3),t.Q6J("ngIf",e.submitted&&(null==e.f.password.errors?null:e.f.password.errors.required)),t.xp6(1),t.Q6J("ngIf",e.submitted&&(null==e.f.password.errors?null:e.f.password.errors.minlength)),t.xp6(3),t.Q6J("ngIf",e.submitting)}}class o{constructor(r,e,d,f,y){this.formBuilder=r,this.route=e,this.router=d,this.accountService=f,this.alertService=y,this.loading=!1,this.submitting=!1,this.submitted=!1}ngOnInit(){this.id=this.route.snapshot.params.id,this.form=this.formBuilder.group({firstName:[this.accountService.userValue?.firstName,n.kI.required],lastName:[this.accountService.userValue?.lastName,n.kI.required],username:[this.accountService.userValue?.username,n.kI.required],password:["",[n.kI.minLength(6),...this.id?[]:[n.kI.required]]]}),this.title="Edit Admin"}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),!this.form.invalid&&(this.submitting=!0,this.saveUser().pipe((0,x.P)()).subscribe({next:()=>{this.alertService.success("User saved",{keepAfterRouteChange:!0}),this.router.navigateByUrl("/users")},error:r=>{this.alertService.error(r),this.submitting=!1}}))}saveUser(){return this.accountService.update(this.form.value)}static#t=this.\u0275fac=function(e){return new(e||o)(t.Y36(n.qu),t.Y36(a.gz),t.Y36(a.F0),t.Y36(g.B),t.Y36(g.c))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["ng-component"]],decls:3,vars:1,consts:[[1,"col-12","md:col-9","xl:col-4"],["header","AOP User"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"grid"],[1,"col-12","md:col-6"],[1,"field","py-2"],[1,"p-float-label"],["type","text","pInputText","","formControlName","firstName",1,"w-full",3,"ngClass"],["for","float-input"],["class","p-error block",4,"ngIf"],["type","text","pInputText","","formControlName","username",1,"w-full",3,"ngClass"],["for","form-label"],[4,"ngIf"],["type","text","pInputText","","formControlName","lastName",1,"w-full",3,"ngClass"],["type","password","pInputText","","formControlName","password",1,"w-full",3,"ngClass"],[1,"form-label"],[1,"flex","flex-row-reverse"],["pButton","submitting",1,"m-1"],["class","pi pi-spin pi-spinner",4,"ngIf"],["pButton","","type","button","routerLink","/",1,"m-1","p-button-secondary"],[1,"p-error","block"],[1,"pi","pi-spin","pi-spinner"]],template:function(e,d){1&e&&(t.TgZ(0,"div",0)(1,"p-card",1),t.YNc(2,q,35,19,"form",2),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("ngIf",!d.loading))},dependencies:[c.mk,c.O5,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,a.rH,h.o,v.Z,Z.Hq],encapsulation:2})}const I=[{path:"",component:o,children:[{path:"add",component:o},{path:"edit/:id",component:o}]}];class m{static#t=this.\u0275fac=function(e){return new(e||m)};static#e=this.\u0275mod=t.oAB({type:m});static#s=this.\u0275inj=t.cJS({imports:[a.Bz.forChild(I),a.Bz]})}var J=i(2174),S=i(5132);class u{static#t=this.\u0275fac=function(e){return new(e||u)};static#e=this.\u0275mod=t.oAB({type:u});static#s=this.\u0275inj=t.cJS({imports:[c.ez,n.UX,m,J.fx,h.j,S.l,v.d,Z.hJ]})}}}]);